package me.notme.notware.commands;

import com.mojang.brigadier.builder.LiteralArgumentBuilder;
import me.notme.notware.utils.misc.ClientPosArgumentType;
import meteordevelopment.meteorclient.systems.commands.Command;
import meteordevelopment.meteorclient.utils.player.ChatUtils;
import net.minecraft.command.CommandSource;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;
import net.minecraft.util.math.Vec3d;

import static com.mojang.brigadier.Command.SINGLE_SUCCESS;

public class ExploitTeleportCommand extends Command {
    public ExploitTeleportCommand() {
        super("exploittp", "Teleport Exploit.", "exploittp");
    }

    @Override
    public void build(LiteralArgumentBuilder<CommandSource> builder) {
        builder.then(argument("pos", ClientPosArgumentType.pos()).executes(ctx -> {
            Vec3d pos = ClientPosArgumentType.getPos(ctx, "pos");
            mc.getNetworkHandler().sendPacket(new PlayerMoveC2SPacket.PositionAndOnGround(pos.getX(), pos.getY(), pos.getZ(), true));
            return SINGLE_SUCCESS;
        }));
        builder.then(argument("pos", ClientPosArgumentType.pos()).executes(ctx -> {
            Vec3d pos = ClientPosArgumentType.getPos(ctx, "pos");
            mc.player.updatePositionAndAngles(pos.getX(), pos.getY(), pos.getZ(), mc.player.getYaw(), mc.player.getPitch());
            return SINGLE_SUCCESS;
        }));
    }
}
